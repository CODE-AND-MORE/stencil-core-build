{"version":3,"file":"index.cjs","sources":["../src/utils/helpers.ts","../src/utils/message-utils.ts","../src/utils/normalize-path.ts","../src/utils/validation.ts","../src/cli/parse-flags.ts","../src/cli/find-config.ts","../src/cli/load-compiler.ts","../src/cli/logs.ts","../src/cli/task-prerender.ts","../src/cli/check-version.ts","../src/cli/task-watch.ts","../src/cli/telemetry/helpers.ts","../src/cli/telemetry/shouldTrack.ts","../src/cli/ionic-config.ts","../src/compiler/output-targets/output-utils.ts","../src/cli/telemetry/telemetry.ts","../src/cli/task-build.ts","../src/cli/task-docs.ts","../src/compiler/sys/environment.ts","../src/cli/task-generate.ts","../src/cli/task-telemetry.ts","../src/cli/task-help.ts","../src/cli/task-info.ts","../src/cli/task-serve.ts","../src/cli/task-test.ts","../src/cli/run.ts"],"sourcesContent":["export const isDef = (v: any) => v != null;\n\nexport const toLowerCase = (str: string) => str.toLowerCase();\n\nexport const toDashCase = (str: string) =>\n  toLowerCase(\n    str\n      .replace(/([A-Z0-9])/g, (g) => ' ' + g[0])\n      .trim()\n      .replace(/ /g, '-')\n  );\n\nexport const dashToPascalCase = (str: string) =>\n  toLowerCase(str)\n    .split('-')\n    .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))\n    .join('');\n\nexport const toTitleCase = (str: string) => str.charAt(0).toUpperCase() + str.slice(1);\n\nexport const noop = (): any => {\n  /* noop*/\n};\n\nexport const isComplexType = (o: any) => {\n  // https://jsperf.com/typeof-fn-object/5\n  o = typeof o;\n  return o === 'object' || o === 'function';\n};\n\nexport const sortBy = <T>(array: T[], prop: (item: T) => string | number) => {\n  return array.slice().sort((a, b) => {\n    const nameA = prop(a);\n    const nameB = prop(b);\n    if (nameA < nameB) return -1;\n    if (nameA > nameB) return 1;\n    return 0;\n  });\n};\n\nexport const flatOne = <T>(array: T[][]): T[] => {\n  if (array.flat) {\n    return array.flat(1);\n  }\n  return array.reduce((result, item) => {\n    result.push(...item);\n    return result;\n  }, [] as T[]);\n};\n\nexport const unique = <T>(array: T[], predicate: (item: T) => any = (i) => i): T[] => {\n  const set = new Set();\n  return array.filter((item) => {\n    const key = predicate(item);\n    if (key == null) {\n      return true;\n    }\n    if (set.has(key)) {\n      return false;\n    }\n    set.add(key);\n    return true;\n  });\n};\n\nexport const fromEntries = <V>(entries: IterableIterator<[string, V]>) => {\n  const object: { [key: string]: V } = {};\n  for (const [key, value] of entries) {\n    object[key] = value;\n  }\n  return object;\n};\n\nexport const pluck = (obj: { [key: string]: any }, keys: string[]) => {\n  return keys.reduce((final, key) => {\n    if (obj[key]) {\n      final[key] = obj[key];\n    }\n    return final;\n  }, {} as { [key: string]: any });\n};\n\nexport const isBoolean = (v: any): v is boolean => typeof v === 'boolean';\nexport const isDefined = (v: any) => v !== null && v !== undefined;\nexport const isUndefined = (v: any) => v === null || v === undefined;\nexport const isFunction = (v: any): v is Function => typeof v === 'function';\nexport const isNumber = (v: any): v is boolean => typeof v === 'number';\nexport const isObject = (val: Object) => val != null && typeof val === 'object' && Array.isArray(val) === false;\nexport const isString = (v: any): v is string => typeof v === 'string';\nexport const isIterable = (v: any): v is Iterable<any> => isDefined(v) && isFunction(v[Symbol.iterator]);\nexport const isPromise = <T = any>(v: any): v is Promise<T> =>\n  !!v && (typeof v === 'object' || typeof v === 'function') && typeof v.then === 'function';\n","import type * as d from '../declarations';\nimport { isString } from './helpers';\n\nexport const buildError = (diagnostics?: d.Diagnostic[]) => {\n  const diagnostic: d.Diagnostic = {\n    level: 'error',\n    type: 'build',\n    header: 'Build Error',\n    messageText: 'build error',\n    relFilePath: null,\n    absFilePath: null,\n    lines: [],\n  };\n\n  if (diagnostics) {\n    diagnostics.push(diagnostic);\n  }\n\n  return diagnostic;\n};\n\nexport const buildWarn = (diagnostics: d.Diagnostic[]) => {\n  const diagnostic: d.Diagnostic = {\n    level: 'warn',\n    type: 'build',\n    header: 'Build Warn',\n    messageText: 'build warn',\n    relFilePath: null,\n    absFilePath: null,\n    lines: [],\n  };\n\n  diagnostics.push(diagnostic);\n\n  return diagnostic;\n};\n\nexport const buildJsonFileError = (\n  compilerCtx: d.CompilerCtx,\n  diagnostics: d.Diagnostic[],\n  jsonFilePath: string,\n  msg: string,\n  pkgKey: string\n) => {\n  const err = buildError(diagnostics);\n  err.messageText = msg;\n  err.absFilePath = jsonFilePath;\n\n  if (typeof pkgKey === 'string') {\n    try {\n      const jsonStr = compilerCtx.fs.readFileSync(jsonFilePath);\n      const lines = jsonStr.replace(/\\r/g, '\\n').split('\\n');\n\n      for (let i = 0; i < lines.length; i++) {\n        const txtLine = lines[i];\n        const txtIndex = txtLine.indexOf(pkgKey);\n\n        if (txtIndex > -1) {\n          const warnLine: d.PrintLine = {\n            lineIndex: i,\n            lineNumber: i + 1,\n            text: txtLine,\n            errorCharStart: txtIndex,\n            errorLength: pkgKey.length,\n          };\n          err.lineNumber = warnLine.lineNumber;\n          err.columnNumber = txtIndex + 1;\n          err.lines.push(warnLine);\n\n          if (i >= 0) {\n            const beforeWarnLine: d.PrintLine = {\n              lineIndex: warnLine.lineIndex - 1,\n              lineNumber: warnLine.lineNumber - 1,\n              text: lines[i - 1],\n              errorCharStart: -1,\n              errorLength: -1,\n            };\n            err.lines.unshift(beforeWarnLine);\n          }\n\n          if (i < lines.length) {\n            const afterWarnLine: d.PrintLine = {\n              lineIndex: warnLine.lineIndex + 1,\n              lineNumber: warnLine.lineNumber + 1,\n              text: lines[i + 1],\n              errorCharStart: -1,\n              errorLength: -1,\n            };\n            err.lines.push(afterWarnLine);\n          }\n\n          break;\n        }\n      }\n    } catch (e) {}\n  }\n\n  return err;\n};\n\nexport const catchError = (diagnostics: d.Diagnostic[], err: Error, msg?: string) => {\n  const diagnostic: d.Diagnostic = {\n    level: 'error',\n    type: 'build',\n    header: 'Build Error',\n    messageText: 'build error',\n    relFilePath: null,\n    absFilePath: null,\n    lines: [],\n  };\n\n  if (isString(msg)) {\n    diagnostic.messageText = msg;\n  } else if (err != null) {\n    if (err.stack != null) {\n      diagnostic.messageText = err.stack.toString();\n    } else {\n      if (err.message != null) {\n        diagnostic.messageText = err.message.toString();\n      } else {\n        diagnostic.messageText = err.toString();\n      }\n    }\n  }\n\n  if (diagnostics != null && !shouldIgnoreError(diagnostic.messageText)) {\n    diagnostics.push(diagnostic);\n  }\n\n  return diagnostic;\n};\n\nexport const hasError = (diagnostics: d.Diagnostic[]): boolean => {\n  if (diagnostics == null || diagnostics.length === 0) {\n    return false;\n  }\n  return diagnostics.some((d) => d.level === 'error' && d.type !== 'runtime');\n};\n\nexport const hasWarning = (diagnostics: d.Diagnostic[]): boolean => {\n  if (diagnostics == null || diagnostics.length === 0) {\n    return false;\n  }\n  return diagnostics.some((d) => d.level === 'warn');\n};\n\nexport const shouldIgnoreError = (msg: any) => {\n  return msg === TASK_CANCELED_MSG;\n};\n\nexport const TASK_CANCELED_MSG = `task canceled`;\n","/**\n * Convert Windows backslash paths to slash paths: foo\\\\bar âž” foo/bar\n * Forward-slash paths can be used in Windows as long as they're not\n * extended-length paths and don't contain any non-ascii characters.\n * This was created since the path methods in Node.js outputs \\\\ paths on Windows.\n */\nexport const normalizePath = (path: string) => {\n  if (typeof path !== 'string') {\n    throw new Error(`invalid path to normalize`);\n  }\n  path = normalizeSlashes(path.trim());\n\n  const components = pathComponents(path, getRootLength(path));\n  const reducedComponents = reducePathComponents(components);\n  const rootPart = reducedComponents[0];\n  const secondPart = reducedComponents[1];\n  const normalized = rootPart + reducedComponents.slice(1).join('/');\n\n  if (normalized === '') {\n    return '.';\n  }\n  if (\n    rootPart === '' &&\n    secondPart &&\n    path.includes('/') &&\n    !secondPart.startsWith('.') &&\n    !secondPart.startsWith('@')\n  ) {\n    return './' + normalized;\n  }\n  return normalized;\n};\n\nconst normalizeSlashes = (path: string) => path.replace(backslashRegExp, '/');\n\nconst altDirectorySeparator = '\\\\';\nconst urlSchemeSeparator = '://';\nconst backslashRegExp = /\\\\/g;\n\nconst reducePathComponents = (components: readonly string[]) => {\n  if (!Array.isArray(components) || components.length === 0) {\n    return [];\n  }\n  const reduced = [components[0]];\n  for (let i = 1; i < components.length; i++) {\n    const component = components[i];\n    if (!component) continue;\n    if (component === '.') continue;\n    if (component === '..') {\n      if (reduced.length > 1) {\n        if (reduced[reduced.length - 1] !== '..') {\n          reduced.pop();\n          continue;\n        }\n      } else if (reduced[0]) continue;\n    }\n    reduced.push(component);\n  }\n  return reduced;\n};\n\nconst getRootLength = (path: string) => {\n  const rootLength = getEncodedRootLength(path);\n  return rootLength < 0 ? ~rootLength : rootLength;\n};\n\nconst getEncodedRootLength = (path: string): number => {\n  if (!path) return 0;\n  const ch0 = path.charCodeAt(0);\n\n  // POSIX or UNC\n  if (ch0 === CharacterCodes.slash || ch0 === CharacterCodes.backslash) {\n    if (path.charCodeAt(1) !== ch0) return 1; // POSIX: \"/\" (or non-normalized \"\\\")\n\n    const p1 = path.indexOf(ch0 === CharacterCodes.slash ? '/' : altDirectorySeparator, 2);\n    if (p1 < 0) return path.length; // UNC: \"//server\" or \"\\\\server\"\n\n    return p1 + 1; // UNC: \"//server/\" or \"\\\\server\\\"\n  }\n\n  // DOS\n  if (isVolumeCharacter(ch0) && path.charCodeAt(1) === CharacterCodes.colon) {\n    const ch2 = path.charCodeAt(2);\n    if (ch2 === CharacterCodes.slash || ch2 === CharacterCodes.backslash) return 3; // DOS: \"c:/\" or \"c:\\\"\n    if (path.length === 2) return 2; // DOS: \"c:\" (but not \"c:d\")\n  }\n\n  // URL\n  const schemeEnd = path.indexOf(urlSchemeSeparator);\n  if (schemeEnd !== -1) {\n    const authorityStart = schemeEnd + urlSchemeSeparator.length;\n    const authorityEnd = path.indexOf('/', authorityStart);\n    if (authorityEnd !== -1) {\n      // URL: \"file:///\", \"file://server/\", \"file://server/path\"\n      // For local \"file\" URLs, include the leading DOS volume (if present).\n      // Per https://www.ietf.org/rfc/rfc1738.txt, a host of \"\" or \"localhost\" is a\n      // special case interpreted as \"the machine from which the URL is being interpreted\".\n      const scheme = path.slice(0, schemeEnd);\n      const authority = path.slice(authorityStart, authorityEnd);\n      if (\n        scheme === 'file' &&\n        (authority === '' || authority === 'localhost') &&\n        isVolumeCharacter(path.charCodeAt(authorityEnd + 1))\n      ) {\n        const volumeSeparatorEnd = getFileUrlVolumeSeparatorEnd(path, authorityEnd + 2);\n        if (volumeSeparatorEnd !== -1) {\n          if (path.charCodeAt(volumeSeparatorEnd) === CharacterCodes.slash) {\n            // URL: \"file:///c:/\", \"file://localhost/c:/\", \"file:///c%3a/\", \"file://localhost/c%3a/\"\n            return ~(volumeSeparatorEnd + 1);\n          }\n          if (volumeSeparatorEnd === path.length) {\n            // URL: \"file:///c:\", \"file://localhost/c:\", \"file:///c$3a\", \"file://localhost/c%3a\"\n            // but not \"file:///c:d\" or \"file:///c%3ad\"\n            return ~volumeSeparatorEnd;\n          }\n        }\n      }\n      return ~(authorityEnd + 1); // URL: \"file://server/\", \"http://server/\"\n    }\n    return ~path.length; // URL: \"file://server\", \"http://server\"\n  }\n\n  // relative\n  return 0;\n};\n\nconst isVolumeCharacter = (charCode: number) =>\n  (charCode >= CharacterCodes.a && charCode <= CharacterCodes.z) ||\n  (charCode >= CharacterCodes.A && charCode <= CharacterCodes.Z);\n\nconst getFileUrlVolumeSeparatorEnd = (url: string, start: number) => {\n  const ch0 = url.charCodeAt(start);\n  if (ch0 === CharacterCodes.colon) return start + 1;\n  if (ch0 === CharacterCodes.percent && url.charCodeAt(start + 1) === CharacterCodes._3) {\n    const ch2 = url.charCodeAt(start + 2);\n    if (ch2 === CharacterCodes.a || ch2 === CharacterCodes.A) return start + 3;\n  }\n  return -1;\n};\n\nconst pathComponents = (path: string, rootLength: number) => {\n  const root = path.substring(0, rootLength);\n  const rest = path.substring(rootLength).split('/');\n  const restLen = rest.length;\n  if (restLen > 0 && !rest[restLen - 1]) {\n    rest.pop();\n  }\n  return [root, ...rest];\n};\n\n/**\n * Same as normalizePath(), expect it'll also strip any querystrings\n * from the path name. So /dir/file.css?tag=cmp-a becomes /dir/file.css\n */\nexport const normalizeFsPath = (p: string) => normalizePath(p.split('?')[0].replace(/\\0/g, ''));\n\nexport const normalizeFsPathQuery = (importPath: string) => {\n  const pathParts = importPath.split('?');\n  const filePath = normalizePath(pathParts[0]);\n  const ext = filePath.split('.').pop().toLowerCase();\n  const params = pathParts.length > 1 ? new URLSearchParams(pathParts[1]) : null;\n  const format = params ? params.get('format') : null;\n\n  return {\n    filePath,\n    ext,\n    params,\n    format,\n  };\n};\n\nconst enum CharacterCodes {\n  a = 0x61,\n  A = 0x41,\n  z = 0x7a,\n  Z = 0x5a,\n  _3 = 0x33,\n\n  backslash = 0x5c, // \\\n  colon = 0x3a, // :\n  dot = 0x2e, // .\n  percent = 0x25, // %\n  slash = 0x2f, // /\n}\n","/**\n * Validates that a component tag meets required naming conventions to be used for a web component\n * @param tag the tag to validate\n * @returns an error message if the tag has an invalid name, undefined if the tag name passes all checks\n */\nexport const validateComponentTag = (tag: string): string | undefined => {\n  if (tag !== tag.trim()) {\n    return `Tag can not contain white spaces`;\n  }\n  if (tag !== tag.toLowerCase()) {\n    return `Tag can not contain upper case characters`;\n  }\n  if (typeof tag !== 'string') {\n    return `Tag \"${tag}\" must be a string type`;\n  }\n  if (tag.length === 0) {\n    return `Received empty tag value`;\n  }\n\n  if (tag.indexOf(' ') > -1) {\n    return `\"${tag}\" tag cannot contain a space`;\n  }\n\n  if (tag.indexOf(',') > -1) {\n    return `\"${tag}\" tag cannot be used for multiple tags`;\n  }\n\n  const invalidChars = tag.replace(/\\w|-/g, '');\n  if (invalidChars !== '') {\n    return `\"${tag}\" tag contains invalid characters: ${invalidChars}`;\n  }\n\n  if (tag.indexOf('-') === -1) {\n    return `\"${tag}\" tag must contain a dash (-) to work as a valid web component`;\n  }\n\n  if (tag.indexOf('--') > -1) {\n    return `\"${tag}\" tag cannot contain multiple dashes (--) next to each other`;\n  }\n\n  if (tag.indexOf('-') === 0) {\n    return `\"${tag}\" tag cannot start with a dash (-)`;\n  }\n\n  if (tag.lastIndexOf('-') === tag.length - 1) {\n    return `\"${tag}\" tag cannot end with a dash (-)`;\n  }\n  return undefined;\n};\n","import type { CompilerSystem, ConfigFlags } from '../declarations';\nimport { dashToPascalCase } from '@utils';\n\nexport const parseFlags = (args: string[], sys?: CompilerSystem): ConfigFlags => {\n  const flags: any = {\n    task: null,\n    args: [],\n    knownArgs: [],\n    unknownArgs: null,\n  };\n\n  // cmd line has more priority over npm scripts cmd\n  flags.args = args.slice();\n  if (flags.args.length > 0 && flags.args[0] && !flags.args[0].startsWith('-')) {\n    flags.task = flags.args[0];\n  }\n  parseArgs(flags, flags.args, flags.knownArgs);\n\n  if (sys && sys.name === 'node') {\n    const envArgs = getNpmConfigEnvArgs(sys);\n    parseArgs(flags, envArgs, flags.knownArgs);\n\n    envArgs.forEach((envArg) => {\n      if (!flags.args.includes(envArg)) {\n        flags.args.push(envArg);\n      }\n    });\n  }\n\n  if (flags.task != null) {\n    const i = flags.args.indexOf(flags.task);\n    if (i > -1) {\n      flags.args.splice(i, 1);\n    }\n  }\n\n  flags.unknownArgs = flags.args.filter((arg: string) => {\n    return !flags.knownArgs.includes(arg);\n  });\n\n  return flags;\n};\n\nconst parseArgs = (flags: any, args: string[], knownArgs: string[]) => {\n  ARG_OPTS.boolean.forEach((booleanName) => {\n    const alias = (ARG_OPTS.alias as any)[booleanName];\n    const flagKey = configCase(booleanName);\n\n    if (typeof flags[flagKey] !== 'boolean') {\n      flags[flagKey] = null;\n    }\n\n    args.forEach((cmdArg) => {\n      if (cmdArg === `--${booleanName}`) {\n        flags[flagKey] = true;\n        knownArgs.push(cmdArg);\n      } else if (cmdArg === `--${flagKey}`) {\n        flags[flagKey] = true;\n        knownArgs.push(cmdArg);\n      } else if (cmdArg === `--no-${booleanName}`) {\n        flags[flagKey] = false;\n        knownArgs.push(cmdArg);\n      } else if (cmdArg === `--no${dashToPascalCase(booleanName)}`) {\n        flags[flagKey] = false;\n        knownArgs.push(cmdArg);\n      } else if (alias && cmdArg === `-${alias}`) {\n        flags[flagKey] = true;\n        knownArgs.push(cmdArg);\n      }\n    });\n  });\n\n  ARG_OPTS.string.forEach((stringName) => {\n    const alias = (ARG_OPTS.alias as any)[stringName];\n    const flagKey = configCase(stringName);\n\n    if (typeof flags[flagKey] !== 'string') {\n      flags[flagKey] = null;\n    }\n\n    for (let i = 0; i < args.length; i++) {\n      const cmdArg = args[i];\n\n      if (cmdArg.startsWith(`--${stringName}=`)) {\n        const values = cmdArg.split('=');\n        values.shift();\n        flags[flagKey] = values.join('=');\n        knownArgs.push(cmdArg);\n      } else if (cmdArg === `--${stringName}`) {\n        flags[flagKey] = args[i + 1];\n        knownArgs.push(cmdArg);\n        knownArgs.push(args[i + 1]);\n      } else if (cmdArg === `--${flagKey}`) {\n        flags[flagKey] = args[i + 1];\n        knownArgs.push(cmdArg);\n        knownArgs.push(args[i + 1]);\n      } else if (cmdArg.startsWith(`--${flagKey}=`)) {\n        const values = cmdArg.split('=');\n        values.shift();\n        flags[flagKey] = values.join('=');\n        knownArgs.push(cmdArg);\n      } else if (alias) {\n        if (cmdArg.startsWith(`-${alias}=`)) {\n          const values = cmdArg.split('=');\n          values.shift();\n          flags[flagKey] = values.join('=');\n          knownArgs.push(cmdArg);\n        } else if (cmdArg === `-${alias}`) {\n          flags[flagKey] = args[i + 1];\n          knownArgs.push(args[i + 1]);\n        }\n      }\n    }\n  });\n\n  ARG_OPTS.number.forEach((numberName) => {\n    const alias = (ARG_OPTS.alias as any)[numberName];\n    const flagKey = configCase(numberName);\n\n    if (typeof flags[flagKey] !== 'number') {\n      flags[flagKey] = null;\n    }\n\n    for (let i = 0; i < args.length; i++) {\n      const cmdArg = args[i];\n\n      if (cmdArg.startsWith(`--${numberName}=`)) {\n        const values = cmdArg.split('=');\n        values.shift();\n        flags[flagKey] = parseInt(values.join(''), 10);\n        knownArgs.push(cmdArg);\n      } else if (cmdArg === `--${numberName}`) {\n        flags[flagKey] = parseInt(args[i + 1], 10);\n        knownArgs.push(args[i + 1]);\n      } else if (cmdArg.startsWith(`--${flagKey}=`)) {\n        const values = cmdArg.split('=');\n        values.shift();\n        flags[flagKey] = parseInt(values.join(''), 10);\n        knownArgs.push(cmdArg);\n      } else if (cmdArg === `--${flagKey}`) {\n        flags[flagKey] = parseInt(args[i + 1], 10);\n        knownArgs.push(args[i + 1]);\n      } else if (alias) {\n        if (cmdArg.startsWith(`-${alias}=`)) {\n          const values = cmdArg.split('=');\n          values.shift();\n          flags[flagKey] = parseInt(values.join(''), 10);\n          knownArgs.push(cmdArg);\n        } else if (cmdArg === `-${alias}`) {\n          flags[flagKey] = parseInt(args[i + 1], 10);\n          knownArgs.push(args[i + 1]);\n        }\n      }\n    }\n  });\n};\n\nconst configCase = (prop: string) => {\n  prop = dashToPascalCase(prop);\n  return prop.charAt(0).toLowerCase() + prop.substr(1);\n};\n\nconst ARG_OPTS = {\n  boolean: [\n    'build',\n    'cache',\n    'check-version',\n    'ci',\n    'compare',\n    'debug',\n    'dev',\n    'devtools',\n    'docs',\n    'e2e',\n    'es5',\n    'esm',\n    'headless',\n    'help',\n    'log',\n    'open',\n    'prerender',\n    'prerender-external',\n    'prod',\n    'profile',\n    'service-worker',\n    'screenshot',\n    'serve',\n    'skip-node-check',\n    'spec',\n    'ssr',\n    'stats',\n    'update-screenshot',\n    'verbose',\n    'version',\n    'watch',\n  ],\n  number: ['max-workers', 'port'],\n  string: ['address', 'config', 'docs-json', 'emulate', 'log-level', 'root', 'screenshot-connector'],\n  alias: {\n    config: 'c',\n    help: 'h',\n    port: 'p',\n    version: 'v',\n  },\n};\n\nconst getNpmConfigEnvArgs = (sys: CompilerSystem) => {\n  // process.env.npm_config_argv\n  // {\"remain\":[\"4444\"],\"cooked\":[\"run\",\"serve\",\"--port\",\"4444\"],\"original\":[\"run\",\"serve\",\"--port\",\"4444\"]}\n  let args: string[] = [];\n  try {\n    const npmConfigArgs = sys.getEnvironmentVar('npm_config_argv');\n    if (npmConfigArgs) {\n      args = JSON.parse(npmConfigArgs).original as string[];\n      if (args[0] === 'run') {\n        args = args.slice(2);\n      }\n    }\n  } catch (e) {}\n  return args;\n};\n","import type { CompilerSystem, Diagnostic } from '../declarations';\nimport { isString, normalizePath, buildError } from '@utils';\n\nexport const findConfig = async (opts: { sys: CompilerSystem; configPath: string }) => {\n  const sys = opts.sys;\n  const cwd = sys.getCurrentDirectory();\n  const results = {\n    configPath: null as string,\n    rootDir: normalizePath(cwd),\n    diagnostics: [] as Diagnostic[],\n  };\n  let configPath = opts.configPath;\n\n  if (isString(configPath)) {\n    if (!sys.platformPath.isAbsolute(configPath)) {\n      // passed in a custom stencil config location\n      // but it's relative, so prefix the cwd\n      configPath = normalizePath(sys.platformPath.join(cwd, configPath));\n    } else {\n      // config path already an absolute path, we're good here\n      configPath = normalizePath(opts.configPath);\n    }\n  } else {\n    // nothing was passed in, use the current working directory\n    configPath = results.rootDir;\n  }\n\n  const stat = await sys.stat(configPath);\n  if (stat.error) {\n    const diagnostic = buildError(results.diagnostics);\n    diagnostic.absFilePath = configPath;\n    diagnostic.header = `Invalid config path`;\n    diagnostic.messageText = `Config path \"${configPath}\" not found`;\n    return results;\n  }\n\n  if (stat.isFile) {\n    results.configPath = configPath;\n    results.rootDir = sys.platformPath.dirname(configPath);\n  } else if (stat.isDirectory) {\n    // this is only a directory, so let's make some assumptions\n    for (const configName of ['stencil.config.ts', 'stencil.config.js']) {\n      const testConfigFilePath = sys.platformPath.join(configPath, configName);\n      const stat = await sys.stat(testConfigFilePath);\n      if (stat.isFile) {\n        results.configPath = testConfigFilePath;\n        results.rootDir = sys.platformPath.dirname(testConfigFilePath);\n        break;\n      }\n    }\n  }\n\n  return results;\n};\n","import type { CompilerSystem } from '../declarations';\n\nexport const loadCoreCompiler = async (sys: CompilerSystem): Promise<CoreCompiler> => {\n  await sys.dynamicImport(sys.getCompilerExecutingPath());\n\n  return (globalThis as any).stencil;\n};\n\nexport type CoreCompiler = typeof import('@stencil/core/compiler');\n","import type { Config, Logger, ConfigFlags, CompilerSystem, TaskCommand } from '../declarations';\nimport type { CoreCompiler } from './load-compiler';\n\nexport const startupLog = (logger: Logger, task: TaskCommand) => {\n  if (task === 'info' || task === 'serve' || task === 'version') {\n    return;\n  }\n\n  logger.info(logger.cyan(`@stencil/core`));\n};\n\nexport const startupLogVersion = (logger: Logger, task: TaskCommand, coreCompiler: CoreCompiler) => {\n  if (task === 'info' || task === 'serve' || task === 'version') {\n    return;\n  }\n  const isDevBuild = coreCompiler.version.includes('-dev.');\n\n  let startupMsg: string;\n\n  if (isDevBuild) {\n    startupMsg = logger.yellow('[LOCAL DEV]');\n  } else {\n    startupMsg = logger.cyan(`v${coreCompiler.version}`);\n  }\n  startupMsg += logger.emoji(' ' + coreCompiler.vermoji);\n\n  logger.info(startupMsg);\n};\n\nexport const loadedCompilerLog = (\n  sys: CompilerSystem,\n  logger: Logger,\n  flags: ConfigFlags,\n  coreCompiler: CoreCompiler\n) => {\n  const sysDetails = sys.details;\n  const runtimeInfo = `${sys.name} ${sys.version}`;\n  const platformInfo = `${sysDetails.platform}, ${sysDetails.cpuModel}`;\n  const statsInfo = `cpus: ${sys.hardwareConcurrency}, freemem: ${Math.round(\n    sysDetails.freemem() / 1000000\n  )}MB, totalmem: ${Math.round(sysDetails.totalmem / 1000000)}MB`;\n\n  if (logger.getLevel() === 'debug') {\n    logger.debug(runtimeInfo);\n    logger.debug(platformInfo);\n    logger.debug(statsInfo);\n    logger.debug(`compiler: ${sys.getCompilerExecutingPath()}`);\n    logger.debug(`build: ${coreCompiler.buildId}`);\n  } else if (flags.ci) {\n    logger.info(runtimeInfo);\n    logger.info(platformInfo);\n    logger.info(statsInfo);\n  }\n};\n\nexport const startupCompilerLog = (coreCompiler: CoreCompiler, config: Config) => {\n  if (config.suppressLogs === true) {\n    return;\n  }\n\n  const { logger } = config;\n  const isDebug = logger.getLevel() === 'debug';\n  const isPrerelease = coreCompiler.version.includes('-');\n  const isDevBuild = coreCompiler.version.includes('-dev.');\n\n  if (isPrerelease && !isDevBuild) {\n    logger.warn(\n      logger.yellow(\n        `This is a prerelease build, undocumented changes might happen at any time. Technical support is not available for prereleases, but any assistance testing is appreciated.`\n      )\n    );\n  }\n\n  if (config.devMode && !isDebug) {\n    if (config.buildEs5) {\n      logger.warn(\n        `Generating ES5 during development is a very task expensive, initial and incremental builds will be much slower. Drop the '--es5' flag and use a modern browser for development.`\n      );\n    }\n\n    if (!config.enableCache) {\n      logger.warn(`Disabling cache during development will slow down incremental builds.`);\n    }\n  }\n};\n","import type { BuildResultsComponentGraph, Config, Diagnostic } from '../declarations';\nimport type { CoreCompiler } from './load-compiler';\nimport { catchError } from '@utils';\nimport { startupCompilerLog } from './logs';\n\nexport const taskPrerender = async (coreCompiler: CoreCompiler, config: Config) => {\n  startupCompilerLog(coreCompiler, config);\n\n  const hydrateAppFilePath = config.flags.unknownArgs[0];\n\n  if (typeof hydrateAppFilePath !== 'string') {\n    config.logger.error(`Missing hydrate app script path`);\n    return config.sys.exit(1);\n  }\n\n  const srcIndexHtmlPath = config.srcIndexHtml;\n\n  const diagnostics = await runPrerenderTask(coreCompiler, config, hydrateAppFilePath, null, srcIndexHtmlPath);\n  config.logger.printDiagnostics(diagnostics);\n\n  if (diagnostics.some((d) => d.level === 'error')) {\n    return config.sys.exit(1);\n  }\n};\n\nexport const runPrerenderTask = async (\n  coreCompiler: CoreCompiler,\n  config: Config,\n  hydrateAppFilePath: string,\n  componentGraph: BuildResultsComponentGraph,\n  srcIndexHtmlPath: string\n) => {\n  const diagnostics: Diagnostic[] = [];\n\n  try {\n    const prerenderer = await coreCompiler.createPrerenderer(config);\n    const results = await prerenderer.start({\n      hydrateAppFilePath,\n      componentGraph,\n      srcIndexHtmlPath,\n    });\n\n    diagnostics.push(...results.diagnostics);\n  } catch (e) {\n    catchError(diagnostics, e);\n  }\n\n  return diagnostics;\n};\n","import type { Config } from '../declarations';\nimport { isFunction } from '@utils';\n\nexport const startCheckVersion = async (config: Config, currentVersion: string) => {\n  if (config.devMode && !config.flags.ci && !currentVersion.includes('-dev.') && isFunction(config.sys.checkVersion)) {\n    return config.sys.checkVersion(config.logger, currentVersion);\n  }\n  return null;\n};\n\nexport const printCheckVersionResults = async (versionChecker: Promise<() => void>) => {\n  if (versionChecker) {\n    const checkVersionResults = await versionChecker;\n    if (isFunction(checkVersionResults)) {\n      checkVersionResults();\n    }\n  }\n};\n","import type { Config, DevServer } from '../declarations';\nimport type { CoreCompiler } from './load-compiler';\nimport { startCheckVersion, printCheckVersionResults } from './check-version';\nimport { startupCompilerLog } from './logs';\n\nexport const taskWatch = async (coreCompiler: CoreCompiler, config: Config) => {\n  let devServer: DevServer = null;\n  let exitCode = 0;\n\n  try {\n    startupCompilerLog(coreCompiler, config);\n\n    const versionChecker = startCheckVersion(config, coreCompiler.version);\n\n    const compiler = await coreCompiler.createCompiler(config);\n    const watcher = await compiler.createWatcher();\n\n    if (config.flags.serve) {\n      const devServerPath = config.sys.getDevServerExecutingPath();\n      const { start }: typeof import('@stencil/core/dev-server') = await config.sys.dynamicImport(devServerPath);\n      devServer = await start(config.devServer, config.logger, watcher);\n    }\n\n    config.sys.onProcessInterrupt(() => {\n      config.logger.debug(`close watch`);\n      compiler && compiler.destroy();\n    });\n\n    const rmVersionCheckerLog = watcher.on('buildFinish', async () => {\n      // log the version check one time\n      rmVersionCheckerLog();\n      printCheckVersionResults(versionChecker);\n    });\n\n    if (devServer) {\n      const rmDevServerLog = watcher.on('buildFinish', () => {\n        // log the dev server url one time\n        rmDevServerLog();\n        config.logger.info(`${config.logger.cyan(devServer.browserUrl)}\\n`);\n      });\n    }\n\n    const closeResults = await watcher.start();\n    if (closeResults.exitCode > 0) {\n      exitCode = closeResults.exitCode;\n    }\n  } catch (e) {\n    exitCode = 1;\n    config.logger.error(e);\n  }\n\n  if (devServer) {\n    await devServer.close();\n  }\n\n  if (exitCode > 0) {\n    return config.sys.exit(exitCode);\n  }\n};\n","import type * as d from '../../declarations';\n\nexport const tryFn = async <T extends (...args: any[]) => Promise<R>, R>(fn: T, ...args: any[]): Promise<R | null> => {\n  try {\n    return await fn(...args);\n  } catch {\n    // ignore\n  }\n\n  return null;\n};\n\nexport declare const TERMINAL_INFO: d.TerminalInfo;\n\nexport const isInteractive = (sys: d.CompilerSystem, config: d.Config, object?: d.TerminalInfo): boolean => {\n  const terminalInfo =\n    object ||\n    Object.freeze({\n      tty: sys.isTTY() ? true : false,\n      ci:\n        ['CI', 'BUILD_ID', 'BUILD_NUMBER', 'BITBUCKET_COMMIT', 'CODEBUILD_BUILD_ARN'].filter(\n          (v) => !!sys.getEnvironmentVar(v)\n        ).length > 0 || !!config.flags?.ci,\n    });\n\n  return terminalInfo.tty && !terminalInfo.ci;\n};\n\nexport const UUID_REGEX = new RegExp(/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i);\n\n// Plucked from https://github.com/ionic-team/capacitor/blob/b893a57aaaf3a16e13db9c33037a12f1a5ac92e0/cli/src/util/uuid.ts\nexport function uuidv4(): string {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = (Math.random() * 16) | 0;\n    const v = c == 'x' ? r : (r & 0x3) | 0x8;\n\n    return v.toString(16);\n  });\n}\n\n/**\n * Reads and parses a JSON file from the given `path`\n * @param sys The system where the command is invoked\n * @param path the path on the file system to read and parse\n * @returns the parsed JSON\n */\nexport async function readJson(sys: d.CompilerSystem, path: string): Promise<any> {\n  const file = await sys.readFile(path);\n  return !!file && JSON.parse(file);\n}\n\n/**\n * Does the command have the debug flag?\n * @param config The config passed into the Stencil command\n * @returns true if --debug has been passed, otherwise false\n */\nexport function hasDebug(config: d.Config) {\n  return config.flags.debug;\n}\n\n/**\n * Does the command have the verbose and debug flags?\n * @param config The config passed into the Stencil command\n * @returns true if both --debug and --verbose have been passed, otherwise false\n */\nexport function hasVerbose(config: d.Config) {\n  return config.flags.verbose && hasDebug(config);\n}\n","import * as d from '../../declarations';\nimport { isInteractive } from './helpers';\nimport { checkTelemetry } from './telemetry';\n\n/**\n * Used to determine if tracking should occur.\n * @param config The config passed into the Stencil command\n * @param sys The system where the command is invoked\n * @param ci whether or not the process is running in a Continuous Integration (CI) environment\n * @returns true if telemetry should be sent, false otherwise\n */\nexport async function shouldTrack(config: d.Config, sys: d.CompilerSystem, ci?: boolean) {\n  return !ci && isInteractive(sys, config) && (await checkTelemetry(sys));\n}\n","import type * as d from '../declarations';\nimport { readJson, uuidv4, UUID_REGEX } from './telemetry/helpers';\n\nexport const isTest = () => process.env.JEST_WORKER_ID !== undefined;\n\nexport const defaultConfig = (sys: d.CompilerSystem) =>\n  sys.resolvePath(`${sys.homeDir()}/.ionic/${isTest() ? 'tmp-config.json' : 'config.json'}`);\n\nexport const defaultConfigDirectory = (sys: d.CompilerSystem) => sys.resolvePath(`${sys.homeDir()}/.ionic`);\n\n/**\n * Reads an Ionic configuration file from disk, parses it, and performs any necessary corrections to it if certain\n * values are deemed to be malformed\n * @param sys The system where the command is invoked\n * @returns the config read from disk that has been potentially been updated\n */\nexport async function readConfig(sys: d.CompilerSystem): Promise<d.TelemetryConfig> {\n  let config: d.TelemetryConfig = await readJson(sys, defaultConfig(sys));\n\n  if (!config) {\n    config = {\n      'tokens.telemetry': uuidv4(),\n      'telemetry.stencil': true,\n    };\n\n    await writeConfig(sys, config);\n  } else if (!UUID_REGEX.test(config['tokens.telemetry'])) {\n    const newUuid = uuidv4();\n    await writeConfig(sys, { ...config, 'tokens.telemetry': newUuid });\n    config['tokens.telemetry'] = newUuid;\n  }\n\n  return config;\n}\n\n/**\n * Writes an Ionic configuration file to disk.\n * @param sys The system where the command is invoked\n * @param config The config passed into the Stencil command\n * @returns boolean If the command was successful\n */\nexport async function writeConfig(sys: d.CompilerSystem, config: d.TelemetryConfig): Promise<boolean> {\n  let result = false;\n  try {\n    await sys.createDir(defaultConfigDirectory(sys), { recursive: true });\n    await sys.writeFile(defaultConfig(sys), JSON.stringify(config, null, 2));\n    result = true;\n  } catch (error) {\n    console.error(`Stencil Telemetry: couldn't write configuration file to ${defaultConfig(sys)} - ${error}.`);\n  }\n\n  return result;\n}\n\n/**\n * Update a subset of the Ionic config.\n * @param sys The system where the command is invoked\n * @param newOptions The new options to save\n * @returns boolean If the command was successful\n */\nexport async function updateConfig(sys: d.CompilerSystem, newOptions: d.TelemetryConfig): Promise<boolean> {\n  const config = await readConfig(sys);\n  return await writeConfig(sys, Object.assign(config, newOptions));\n}\n","import type * as d from '../../declarations';\nimport { basename, dirname, join, relative } from 'path';\nimport { flatOne, normalizePath, sortBy } from '@utils';\n\nexport const relativeImport = (pathFrom: string, pathTo: string, ext?: string, addPrefix = true) => {\n  let relativePath = relative(dirname(pathFrom), dirname(pathTo));\n  if (addPrefix) {\n    if (relativePath === '') {\n      relativePath = '.';\n    } else if (relativePath[0] !== '.') {\n      relativePath = './' + relativePath;\n    }\n  }\n  return normalizePath(`${relativePath}/${basename(pathTo, ext)}`);\n};\n\nexport const getDistEsmDir = (outputTarget: d.OutputTargetDist, sourceTarget?: d.SourceTarget) =>\n  join(outputTarget.buildDir, 'esm', sourceTarget || '');\n\nexport const getDistEsmComponentsDir = (outputTarget: d.OutputTargetDist, sourceTarget: d.SourceTarget) =>\n  join(getDistEsmDir(outputTarget, sourceTarget), 'build');\n\nexport const getDistEsmIndexPath = (outputTarget: d.OutputTargetDist, sourceTarget?: d.SourceTarget) =>\n  join(getDistEsmDir(outputTarget, sourceTarget), 'index.js');\n\nexport const getDefineCustomElementsPath = (\n  config: d.Config,\n  outputTarget: d.OutputTargetDist,\n  sourceTarget: d.SourceTarget\n) => join(getDistEsmDir(outputTarget, sourceTarget), getDefineEsmFilename(config));\n\nexport const getComponentsEsmBuildPath = (\n  config: d.Config,\n  outputTarget: d.OutputTargetDist,\n  sourceTarget: d.SourceTarget\n) => join(getDistEsmDir(outputTarget, sourceTarget), getComponentsEsmFileName(config));\n\nexport const getCoreEsmFileName = (config: d.Config) => `${config.fsNamespace}.core.js`;\n\nexport const getDefineEsmFilename = (config: d.Config) => `${config.fsNamespace}.define.js`;\n\nexport const getComponentsEsmFileName = (config: d.Config) => `${config.fsNamespace}.components.js`;\n\nexport const getLoaderEsmPath = (outputTarget: d.OutputTargetDist) =>\n  join(outputTarget.buildDir, outputTarget.esmLoaderPath);\n\nexport const getComponentsDtsSrcFilePath = (config: d.Config) => join(config.srcDir, GENERATED_DTS);\n\nexport const getComponentsDtsTypesFilePath = (outputTarget: d.OutputTargetDist | d.OutputTargetDistTypes) =>\n  join(outputTarget.typesDir, GENERATED_DTS);\n\nexport const isOutputTargetDist = (o: d.OutputTarget): o is d.OutputTargetDist => o.type === DIST;\n\nexport const isOutputTargetDistCollection = (o: d.OutputTarget): o is d.OutputTargetDistCollection =>\n  o.type === DIST_COLLECTION;\n\nexport const isOutputTargetDistCustomElements = (o: d.OutputTarget): o is d.OutputTargetDistCustomElements =>\n  o.type === DIST_CUSTOM_ELEMENTS;\n\nexport const isOutputTargetDistCustomElementsBundle = (\n  o: d.OutputTarget\n): o is d.OutputTargetDistCustomElementsBundle => o.type === DIST_CUSTOM_ELEMENTS_BUNDLE;\n\nexport const isOutputTargetCopy = (o: d.OutputTarget): o is d.OutputTargetCopy => o.type === COPY;\n\nexport const isOutputTargetDistLazy = (o: d.OutputTarget): o is d.OutputTargetDistLazy => o.type === DIST_LAZY;\n\nexport const isOutputTargetAngular = (o: d.OutputTarget): o is d.OutputTargetAngular => o.type === ANGULAR;\n\nexport const isOutputTargetDistLazyLoader = (o: d.OutputTarget): o is d.OutputTargetDistLazyLoader =>\n  o.type === DIST_LAZY_LOADER;\n\nexport const isOutputTargetDistGlobalStyles = (o: d.OutputTarget): o is d.OutputTargetDistGlobalStyles =>\n  o.type === DIST_GLOBAL_STYLES;\n\nexport const isOutputTargetHydrate = (o: d.OutputTarget): o is d.OutputTargetHydrate => o.type === DIST_HYDRATE_SCRIPT;\n\nexport const isOutputTargetCustom = (o: d.OutputTarget): o is d.OutputTargetCustom => o.type === CUSTOM;\n\nexport const isOutputTargetDocs = (\n  o: d.OutputTarget\n): o is d.OutputTargetDocsJson | d.OutputTargetDocsReadme | d.OutputTargetDocsVscode | d.OutputTargetDocsCustom =>\n  o.type === DOCS_README || o.type === DOCS_JSON || o.type === DOCS_CUSTOM || o.type === DOCS_VSCODE;\n\nexport const isOutputTargetDocsReadme = (o: d.OutputTarget): o is d.OutputTargetDocsReadme => o.type === DOCS_README;\n\nexport const isOutputTargetDocsJson = (o: d.OutputTarget): o is d.OutputTargetDocsJson => o.type === DOCS_JSON;\n\nexport const isOutputTargetDocsCustom = (o: d.OutputTarget): o is d.OutputTargetDocsCustom => o.type === DOCS_CUSTOM;\n\nexport const isOutputTargetDocsVscode = (o: d.OutputTarget): o is d.OutputTargetDocsVscode => o.type === DOCS_VSCODE;\n\nexport const isOutputTargetWww = (o: d.OutputTarget): o is d.OutputTargetWww => o.type === WWW;\n\nexport const isOutputTargetStats = (o: d.OutputTarget): o is d.OutputTargetStats => o.type === STATS;\n\nexport const isOutputTargetDistTypes = (o: d.OutputTarget): o is d.OutputTargetDistTypes => o.type === DIST_TYPES;\n\nexport const getComponentsFromModules = (moduleFiles: d.Module[]) =>\n  sortBy(flatOne(moduleFiles.map((m) => m.cmps)), (c: d.ComponentCompilerMeta) => c.tagName);\n\nexport const canSkipOutputTargets = (buildCtx: d.BuildCtx) => {\n  if (buildCtx.components.length === 0) {\n    return true;\n  }\n  if (buildCtx.requiresFullBuild) {\n    return false;\n  }\n  if (buildCtx.isRebuild && (buildCtx.hasScriptChanges || buildCtx.hasStyleChanges || buildCtx.hasHtmlChanges)) {\n    return false;\n  }\n  return true;\n};\n\nexport const ANGULAR = `angular`;\nexport const COPY = 'copy';\nexport const CUSTOM = `custom`;\nexport const DIST = `dist`;\nexport const DIST_COLLECTION = `dist-collection`;\nexport const DIST_CUSTOM_ELEMENTS = `dist-custom-elements`;\nexport const DIST_CUSTOM_ELEMENTS_BUNDLE = `dist-custom-elements-bundle`;\n\nexport const DIST_TYPES = `dist-types`;\nexport const DIST_HYDRATE_SCRIPT = `dist-hydrate-script`;\nexport const DIST_LAZY = `dist-lazy`;\nexport const DIST_LAZY_LOADER = `dist-lazy-loader`;\nexport const DIST_GLOBAL_STYLES = 'dist-global-styles';\nexport const DOCS_CUSTOM = 'docs-custom';\nexport const DOCS_JSON = `docs-json`;\nexport const DOCS_README = `docs-readme`;\nexport const DOCS_VSCODE = `docs-vscode`;\nexport const STATS = `stats`;\nexport const WWW = `www`;\n\nexport const VALID_TYPES = [\n  // DIST\n  WWW,\n  DIST,\n  DIST_COLLECTION,\n  DIST_CUSTOM_ELEMENTS,\n  DIST_CUSTOM_ELEMENTS_BUNDLE,\n  DIST_LAZY,\n  DIST_HYDRATE_SCRIPT,\n\n  // DOCS\n  DOCS_JSON,\n  DOCS_README,\n  DOCS_VSCODE,\n  DOCS_CUSTOM,\n\n  // MISC\n  ANGULAR,\n  COPY,\n  CUSTOM,\n  STATS,\n];\n\nexport const GENERATED_DTS = 'components.d.ts';\n","import { tryFn, hasDebug, readJson, hasVerbose, uuidv4 } from './helpers';\nimport { shouldTrack } from './shouldTrack';\nimport type * as d from '../../declarations';\nimport { readConfig, updateConfig, writeConfig } from '../ionic-config';\nimport { CoreCompiler } from '../load-compiler';\nimport { WWW } from '../../compiler/output-targets/output-utils';\n\n/**\n * Used to within taskBuild to provide the component_count property.\n *\n * @param sys The system where the command is invoked\n * @param config The config passed into the Stencil command\n * @param logger The tool used to do logging\n * @param coreCompiler The compiler used to do builds\n * @param result The results of a compiler build.\n */\nexport async function telemetryBuildFinishedAction(\n  sys: d.CompilerSystem,\n  config: d.Config,\n  logger: d.Logger,\n  coreCompiler: CoreCompiler,\n  result: d.CompilerBuildResults\n) {\n  const tracking = await shouldTrack(config, sys, config.flags.ci);\n\n  if (!tracking) {\n    return;\n  }\n\n  const component_count = Object.keys(result.componentGraph).length;\n\n  const data = await prepareData(coreCompiler, config, sys, result.duration, component_count);\n\n  await sendMetric(sys, config, 'stencil_cli_command', data);\n  logger.debug(`${logger.blue('Telemetry')}: ${logger.gray(JSON.stringify(data))}`);\n}\n\n/**\n * A function to wrap a compiler task function around. Will send telemetry if, and only if, the machine allows.\n * @param sys The system where the command is invoked\n * @param config The config passed into the Stencil command\n * @param logger The tool used to do logging\n * @param coreCompiler The compiler used to do builds\n * @param action A Promise-based function to call in order to get the duration of any given command.\n * @returns void\n */\nexport async function telemetryAction(\n  sys: d.CompilerSystem,\n  config: d.Config,\n  logger: d.Logger,\n  coreCompiler: CoreCompiler,\n  action?: d.TelemetryCallback\n) {\n  const tracking = await shouldTrack(config, sys, !!config?.flags?.ci);\n\n  let duration = undefined;\n  let error: any;\n\n  if (action) {\n    const start = new Date();\n\n    try {\n      await action();\n    } catch (e) {\n      error = e;\n    }\n\n    const end = new Date();\n    duration = end.getTime() - start.getTime();\n  }\n\n  // We'll get componentCount details inside the taskBuild, so let's not send two messages.\n  if (!tracking || (config.flags.task == 'build' && !config.flags.args.includes('--watch'))) {\n    return;\n  }\n\n  const data = await prepareData(coreCompiler, config, sys, duration);\n\n  await sendMetric(sys, config, 'stencil_cli_command', data);\n  logger.debug(`${logger.blue('Telemetry')}: ${logger.gray(JSON.stringify(data))}`);\n\n  if (error) {\n    throw error;\n  }\n}\n\nexport function hasAppTarget(config: d.Config): boolean {\n  return config.outputTargets.some(\n    (target) => target.type === WWW && (!!target.serviceWorker || (!!target.baseUrl && target.baseUrl !== '/'))\n  );\n}\n\nexport function isUsingYarn(sys: d.CompilerSystem) {\n  return sys.getEnvironmentVar('npm_execpath')?.includes('yarn') || false;\n}\n\nexport async function getActiveTargets(config: d.Config): Promise<string[]> {\n  const result = config.outputTargets.map((t) => t.type);\n  return Array.from(new Set(result));\n}\n\nexport const prepareData = async (\n  coreCompiler: CoreCompiler,\n  config: d.Config,\n  sys: d.CompilerSystem,\n  duration_ms: number,\n  component_count: number = undefined\n): Promise<d.TrackableData> => {\n  const { typescript, rollup } = coreCompiler.versions || { typescript: 'unknown', rollup: 'unknown' };\n  const { packages, packagesNoVersions } = await getInstalledPackages(sys, config);\n  const targets = await getActiveTargets(config);\n  const yarn = isUsingYarn(sys);\n  const stencil = coreCompiler.version || 'unknown';\n  const system = `${sys.name} ${sys.version}`;\n  const os_name = sys.details.platform;\n  const os_version = sys.details.release;\n  const cpu_model = sys.details.cpuModel;\n  const build = coreCompiler.buildId || 'unknown';\n  const has_app_pwa_config = hasAppTarget(config);\n\n  return {\n    yarn,\n    duration_ms,\n    component_count,\n    targets,\n    packages,\n    packages_no_versions: packagesNoVersions,\n    arguments: config.flags.args,\n    task: config.flags.task,\n    stencil,\n    system,\n    system_major: getMajorVersion(system),\n    os_name,\n    os_version,\n    cpu_model,\n    build,\n    typescript,\n    rollup,\n    has_app_pwa_config,\n  };\n};\n\n/**\n * Reads package-lock.json, yarn.lock, and package.json files in order to cross reference\n * the dependencies and devDependencies properties. Pulls up the current installed version\n * of each package under the @stencil, @ionic, and @capacitor scopes.\n * @returns string[]\n */\nasync function getInstalledPackages(\n  sys: d.CompilerSystem,\n  config: d.Config\n): Promise<{ packages: string[]; packagesNoVersions: string[] }> {\n  let packages: string[] = [];\n  let packagesNoVersions: string[] = [];\n  const yarn = isUsingYarn(sys);\n\n  try {\n    // Read package.json and package-lock.json\n    const appRootDir = sys.getCurrentDirectory();\n\n    const packageJson: d.PackageJsonData = await tryFn(readJson, sys, sys.resolvePath(appRootDir + '/package.json'));\n\n    // They don't have a package.json for some reason? Eject button.\n    if (!packageJson) {\n      return { packages, packagesNoVersions };\n    }\n\n    const rawPackages: [string, string][] = Object.entries({\n      ...packageJson.devDependencies,\n      ...packageJson.dependencies,\n    });\n\n    // Collect packages only in the stencil, ionic, or capacitor org's:\n    // https://www.npmjs.com/org/stencil\n    const ionicPackages = rawPackages.filter(\n      ([k]) => k.startsWith('@stencil/') || k.startsWith('@ionic/') || k.startsWith('@capacitor/')\n    );\n\n    try {\n      packages = yarn ? await yarnPackages(sys, ionicPackages) : await npmPackages(sys, ionicPackages);\n    } catch (e) {\n      packages = ionicPackages.map(([k, v]) => `${k}@${v.replace('^', '')}`);\n    }\n\n    packagesNoVersions = ionicPackages.map(([k]) => `${k}`);\n\n    return { packages, packagesNoVersions };\n  } catch (err) {\n    hasDebug(config) && console.error(err);\n    return { packages, packagesNoVersions };\n  }\n}\n\n/**\n * Visits the npm lock file to find the exact versions that are installed\n * @param sys The system where the command is invoked\n * @param ionicPackages a list of the found packages matching `@stencil`, `@capacitor`, or `@ionic` from the package.json file.\n * @returns an array of strings of all the packages and their versions.\n */\nasync function npmPackages(sys: d.CompilerSystem, ionicPackages: [string, string][]): Promise<string[]> {\n  const appRootDir = sys.getCurrentDirectory();\n  const packageLockJson: any = await tryFn(readJson, sys, sys.resolvePath(appRootDir + '/package-lock.json'));\n\n  return ionicPackages.map(([k, v]) => {\n    let version = packageLockJson?.dependencies[k]?.version ?? packageLockJson?.devDependencies[k]?.version ?? v;\n    version = version.includes('file:') ? sanitizeDeclaredVersion(v) : version;\n    return `${k}@${version}`;\n  });\n}\n\n/**\n * Visits the yarn lock file to find the exact versions that are installed\n * @param sys The system where the command is invoked\n * @param ionicPackages a list of the found packages matching `@stencil`, `@capacitor`, or `@ionic` from the package.json file.\n * @returns an array of strings of all the packages and their versions.\n */\nasync function yarnPackages(sys: d.CompilerSystem, ionicPackages: [string, string][]): Promise<string[]> {\n  const appRootDir = sys.getCurrentDirectory();\n  const yarnLock = sys.readFileSync(sys.resolvePath(appRootDir + '/yarn.lock'));\n  const yarnLockYml = sys.parseYarnLockFile(yarnLock);\n\n  return ionicPackages.map(([k, v]) => {\n    const identifiedVersion = `${k}@${v}`;\n    let version = yarnLockYml.object[identifiedVersion]?.version;\n    version = version.includes('undefined') ? sanitizeDeclaredVersion(identifiedVersion) : version;\n    return `${k}@${version}`;\n  });\n}\n\n/**\n * This function is used for fallback purposes, where an npm or yarn lock file doesn't exist in the consumers directory.\n * This will strip away '*', '^' and '~' from the declared package versions in a package.json.\n * @param version the raw semver pattern identifier version string\n * @returns a cleaned up representation without any qualifiers\n */\nfunction sanitizeDeclaredVersion(version: string): string {\n  return version.replace(/[*^~]/g, '');\n}\n\n/**\n * If telemetry is enabled, send a metric via IPC to a forked process for uploading.\n */\nexport async function sendMetric(\n  sys: d.CompilerSystem,\n  config: d.Config,\n  name: string,\n  value: d.TrackableData\n): Promise<void> {\n  const session_id = await getTelemetryToken(sys);\n\n  const message: d.Metric = {\n    name,\n    timestamp: new Date().toISOString(),\n    source: 'stencil_cli',\n    value,\n    session_id,\n  };\n\n  await sendTelemetry(sys, config, { type: 'telemetry', message });\n}\n\n/**\n * Used to read the config file's tokens.telemetry property.\n * @param sys The system where the command is invoked\n * @returns string\n */\nasync function getTelemetryToken(sys: d.CompilerSystem) {\n  const config = await readConfig(sys);\n  if (config['tokens.telemetry'] === undefined) {\n    config['tokens.telemetry'] = uuidv4();\n    await writeConfig(sys, config);\n  }\n  return config['tokens.telemetry'];\n}\n\n/**\n * Issues a request to the telemetry server.\n * @param sys The system where the command is invoked\n * @param config The config passed into the Stencil command\n * @param data Data to be tracked\n */\nasync function sendTelemetry(sys: d.CompilerSystem, config: d.Config, data: any) {\n  try {\n    const now = new Date().toISOString();\n\n    const body = {\n      metrics: [data.message],\n      sent_at: now,\n    };\n\n    // This request is only made if telemetry is on.\n    const response = await sys.fetch('https://api.ionicjs.com/events/metrics', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(body),\n    });\n\n    hasVerbose(config) &&\n      console.debug('\\nSent %O metric to events service (status: %O)', data.message.name, response.status, '\\n');\n\n    if (response.status !== 204) {\n      hasVerbose(config) &&\n        console.debug('\\nBad response from events service. Request body: %O', response.body.toString(), '\\n');\n    }\n  } catch (e) {\n    hasVerbose(config) && console.debug('Telemetry request failed:', e);\n  }\n}\n\n/**\n * Checks if telemetry is enabled on this machine\n * @param sys The system where the command is invoked\n * @returns true if telemetry is enabled, false otherwise\n */\nexport async function checkTelemetry(sys: d.CompilerSystem): Promise<boolean> {\n  const config = await readConfig(sys);\n  if (config['telemetry.stencil'] === undefined) {\n    config['telemetry.stencil'] = true;\n    await writeConfig(sys, config);\n  }\n  return config['telemetry.stencil'];\n}\n\n/**\n * Writes to the config file, enabling telemetry for this machine.\n * @param sys The system where the command is invoked\n * @returns true if writing the file was successful, false otherwise\n */\nexport async function enableTelemetry(sys: d.CompilerSystem): Promise<boolean> {\n  return await updateConfig(sys, { 'telemetry.stencil': true });\n}\n\n/**\n * Writes to the config file, disabling telemetry for this machine.\n * @param sys The system where the command is invoked\n * @returns true if writing the file was successful, false otherwise\n */\nexport async function disableTelemetry(sys: d.CompilerSystem): Promise<boolean> {\n  return await updateConfig(sys, { 'telemetry.stencil': false });\n}\n\n/**\n * Takes in a semver string in order to return the major version.\n * @param version The fully qualified semver version\n * @returns a string of the major version\n */\nfunction getMajorVersion(version: string): string {\n  const parts = version.split('.');\n  return parts[0];\n}\n","import type * as d from '../declarations';\nimport type { CoreCompiler } from './load-compiler';\nimport { runPrerenderTask } from './task-prerender';\nimport { startCheckVersion, printCheckVersionResults } from './check-version';\nimport { startupCompilerLog } from './logs';\nimport { taskWatch } from './task-watch';\nimport { telemetryBuildFinishedAction } from './telemetry/telemetry';\n\nexport const taskBuild = async (coreCompiler: CoreCompiler, config: d.Config, sys?: d.CompilerSystem) => {\n  if (config.flags.watch) {\n    // watch build\n    await taskWatch(coreCompiler, config);\n    return;\n  }\n\n  // one-time build\n  let exitCode = 0;\n\n  try {\n    startupCompilerLog(coreCompiler, config);\n\n    const versionChecker = startCheckVersion(config, coreCompiler.version);\n\n    const compiler = await coreCompiler.createCompiler(config);\n    const results = await compiler.build();\n\n    // TODO(STENCIL-148) make this parameter no longer optional, remove the surrounding if statement\n    if (sys) {\n      await telemetryBuildFinishedAction(sys, config, config.logger, coreCompiler, results);\n    }\n\n    await compiler.destroy();\n\n    if (results.hasError) {\n      exitCode = 1;\n    } else if (config.flags.prerender) {\n      const prerenderDiagnostics = await runPrerenderTask(\n        coreCompiler,\n        config,\n        results.hydrateAppFilePath,\n        results.componentGraph,\n        null\n      );\n      config.logger.printDiagnostics(prerenderDiagnostics);\n\n      if (prerenderDiagnostics.some((d) => d.level === 'error')) {\n        exitCode = 1;\n      }\n    }\n\n    await printCheckVersionResults(versionChecker);\n  } catch (e) {\n    exitCode = 1;\n    config.logger.error(e);\n  }\n\n  if (exitCode > 0) {\n    return config.sys.exit(exitCode);\n  }\n};\n","import type { Config } from '../declarations';\nimport type { CoreCompiler } from './load-compiler';\nimport { isOutputTargetDocs } from '../compiler/output-targets/output-utils';\nimport { startupCompilerLog } from './logs';\n\nexport const taskDocs = async (coreCompiler: CoreCompiler, config: Config) => {\n  config.devServer = null;\n  config.outputTargets = config.outputTargets.filter(isOutputTargetDocs);\n  config.devMode = true;\n\n  startupCompilerLog(coreCompiler, config);\n\n  const compiler = await coreCompiler.createCompiler(config);\n  await compiler.build();\n\n  await compiler.destroy();\n};\n","export const IS_NODE_ENV =\n  typeof global !== 'undefined' &&\n  typeof require === 'function' &&\n  !!global.process &&\n  typeof __filename === 'string' &&\n  (!(global as any as Window).origin || typeof (global as any as Window).origin !== 'string');\n\nexport const OS_PLATFORM = IS_NODE_ENV ? process.platform : '';\n\nexport const IS_WINDOWS_ENV = OS_PLATFORM === 'win32';\n\nexport const IS_CASE_SENSITIVE_FILE_NAMES = !IS_WINDOWS_ENV;\n\nexport const IS_BROWSER_ENV =\n  typeof location !== 'undefined' && typeof navigator !== 'undefined' && typeof XMLHttpRequest !== 'undefined';\n\nexport const IS_WEB_WORKER_ENV =\n  IS_BROWSER_ENV && typeof self !== 'undefined' && typeof (self as any).importScripts === 'function';\n\nexport const HAS_WEB_WORKER = IS_BROWSER_ENV && typeof Worker === 'function';\n\nexport const IS_FETCH_ENV = typeof fetch === 'function';\n\nexport const requireFunc = IS_NODE_ENV ? require : () => {};\n\nexport const getCurrentDirectory: () => string = IS_NODE_ENV ? process.cwd : () => '/';\n","import type { Config } from '../declarations';\nimport type { CoreCompiler } from './load-compiler';\nimport { IS_NODE_ENV } from '../compiler/sys/environment';\nimport { validateComponentTag } from '@utils';\n\n/**\n * Task to generate component boilerplate.\n */\nexport const taskGenerate = async (coreCompiler: CoreCompiler, config: Config) => {\n  if (!IS_NODE_ENV) {\n    config.logger.error(`\"generate\" command is currently only implemented for a NodeJS environment`);\n    return config.sys.exit(1);\n  }\n\n  const path = coreCompiler.path;\n\n  if (!config.configPath) {\n    config.logger.error('Please run this command in your root directory (i. e. the one containing stencil.config.ts).');\n    return config.sys.exit(1);\n  }\n\n  const absoluteSrcDir = config.srcDir;\n\n  if (!absoluteSrcDir) {\n    config.logger.error(`Stencil's srcDir was not specified.`);\n    return config.sys.exit(1);\n  }\n\n  const { prompt } = await import('prompts');\n\n  const input =\n    config.flags.unknownArgs.find((arg) => !arg.startsWith('-')) ||\n    ((await prompt({ name: 'tagName', type: 'text', message: 'Component tag name (dash-case):' })).tagName as string);\n\n  const { dir, base: componentName } = path.parse(input);\n\n  const tagError = validateComponentTag(componentName);\n  if (tagError) {\n    config.logger.error(tagError);\n    return config.sys.exit(1);\n  }\n\n  const extensionsToGenerate: GeneratableExtension[] = ['tsx', ...(await chooseFilesToGenerate())];\n\n  const testFolder = extensionsToGenerate.some(isTest) ? 'test' : '';\n\n  const outDir = path.join(absoluteSrcDir, 'components', dir, componentName);\n  await config.sys.createDir(path.join(outDir, testFolder), { recursive: true });\n\n  const writtenFiles = await Promise.all(\n    extensionsToGenerate.map((extension) =>\n      writeFileByExtension(coreCompiler, config, outDir, componentName, extension, extensionsToGenerate.includes('css'))\n    )\n  ).catch((error) => config.logger.error(error));\n\n  if (!writtenFiles) {\n    return config.sys.exit(1);\n  }\n\n  console.log();\n  console.log(`${config.logger.gray('$')} stencil generate ${input}`);\n  console.log();\n  console.log(config.logger.bold('The following files have been generated:'));\n\n  const absoluteRootDir = config.rootDir;\n  writtenFiles.map((file) => console.log(`  - ${path.relative(absoluteRootDir, file)}`));\n};\n\n/**\n * Show a checkbox prompt to select the files to be generated.\n */\nconst chooseFilesToGenerate = async () => {\n  const { prompt } = await import('prompts');\n  return (\n    await prompt({\n      name: 'filesToGenerate',\n      type: 'multiselect',\n      message: 'Which additional files do you want to generate?',\n      choices: [\n        { value: 'css', title: 'Stylesheet (.css)', selected: true },\n        { value: 'spec.tsx', title: 'Spec Test  (.spec.tsx)', selected: true },\n        { value: 'e2e.ts', title: 'E2E Test (.e2e.ts)', selected: true },\n      ] as any[],\n    })\n  ).filesToGenerate as GeneratableExtension[];\n};\n\n/**\n * Get a file's boilerplate by its extension and write it to disk.\n */\nconst writeFileByExtension = async (\n  coreCompiler: CoreCompiler,\n  config: Config,\n  path: string,\n  name: string,\n  extension: GeneratableExtension,\n  withCss: boolean\n) => {\n  if (isTest(extension)) {\n    path = coreCompiler.path.join(path, 'test');\n  }\n  const outFile = coreCompiler.path.join(path, `${name}.${extension}`);\n  const boilerplate = getBoilerplateByExtension(name, extension, withCss);\n\n  await config.sys.writeFile(outFile, boilerplate);\n\n  return outFile;\n};\n\nconst isTest = (extension: string) => {\n  return extension === 'e2e.ts' || extension === 'spec.tsx';\n};\n\n/**\n * Get the boilerplate for a file by its extension.\n */\nconst getBoilerplateByExtension = (tagName: string, extension: GeneratableExtension, withCss: boolean) => {\n  switch (extension) {\n    case 'tsx':\n      return getComponentBoilerplate(tagName, withCss);\n\n    case 'css':\n      return getStyleUrlBoilerplate();\n\n    case 'spec.tsx':\n      return getSpecTestBoilerplate(tagName);\n\n    case 'e2e.ts':\n      return getE2eTestBoilerplate(tagName);\n\n    default:\n      throw new Error(`Unkown extension \"${extension}\".`);\n  }\n};\n\n/**\n * Get the boilerplate for a component.\n */\nconst getComponentBoilerplate = (tagName: string, hasStyle: boolean) => {\n  const decorator = [`{`];\n  decorator.push(`  tag: '${tagName}',`);\n  if (hasStyle) {\n    decorator.push(`  styleUrl: '${tagName}.css',`);\n  }\n  decorator.push(`  shadow: true,`);\n  decorator.push(`}`);\n\n  return `import { Component, Host, h } from '@stencil/core';\n\n@Component(${decorator.join('\\n')})\nexport class ${toPascalCase(tagName)} {\n\n  render() {\n    return (\n      <Host>\n        <slot></slot>\n      </Host>\n    );\n  }\n\n}\n`;\n};\n\n/**\n * Get the boilerplate for style.\n */\nconst getStyleUrlBoilerplate = () =>\n  `:host {\n  display: block;\n}\n`;\n\n/**\n * Get the boilerplate for a spec test.\n */\nconst getSpecTestBoilerplate = (tagName: string) =>\n  `import { newSpecPage } from '@stencil/core/testing';\nimport { ${toPascalCase(tagName)} } from '../${tagName}';\n\ndescribe('${tagName}', () => {\n  it('renders', async () => {\n    const page = await newSpecPage({\n      components: [${toPascalCase(tagName)}],\n      html: \\`<${tagName}></${tagName}>\\`,\n    });\n    expect(page.root).toEqualHtml(\\`\n      <${tagName}>\n        <mock:shadow-root>\n          <slot></slot>\n        </mock:shadow-root>\n      </${tagName}>\n    \\`);\n  });\n});\n`;\n\n/**\n * Get the boilerplate for an E2E test.\n */\nconst getE2eTestBoilerplate = (name: string) =>\n  `import { newE2EPage } from '@stencil/core/testing';\n\ndescribe('${name}', () => {\n  it('renders', async () => {\n    const page = await newE2EPage();\n    await page.setContent('<${name}></${name}>');\n\n    const element = await page.find('${name}');\n    expect(element).toHaveClass('hydrated');\n  });\n});\n`;\n\n/**\n * Convert a dash case string to pascal case.\n */\nconst toPascalCase = (str: string) =>\n  str.split('-').reduce((res, part) => res + part[0].toUpperCase() + part.substr(1), '');\n\n/**\n * Extensions available to generate.\n */\ntype GeneratableExtension = 'tsx' | 'css' | 'spec.tsx' | 'e2e.ts';\n","import type * as d from '../declarations';\nimport { checkTelemetry, disableTelemetry, enableTelemetry } from './telemetry/telemetry';\n\nexport const taskTelemetry = async (config: d.Config, sys: d.CompilerSystem, logger: d.Logger) => {\n  const prompt = logger.dim(sys.details.platform === 'windows' ? '>' : '$');\n  const isEnabling = config.flags.args.includes('on');\n  const isDisabling = config.flags.args.includes('off');\n  const INFORMATION = `Opt in or our of telemetry. Information about the data we collect is available on our website: ${logger.bold(\n    'https://stenciljs.com/telemetry'\n  )}`;\n  const THANK_YOU = `Thank you for helping to make Stencil better! ðŸ’–`;\n  const ENABLED_MESSAGE = `${logger.green('Enabled')}. ${THANK_YOU}\\n\\n`;\n  const DISABLED_MESSAGE = `${logger.red('Disabled')}\\n\\n`;\n  const hasTelemetry = await checkTelemetry(sys);\n\n  if (isEnabling) {\n    const result = await enableTelemetry(sys);\n    result\n      ? console.log(`\\n  ${logger.bold('Telemetry is now ') + ENABLED_MESSAGE}`)\n      : console.log(`Something went wrong when enabling Telemetry.`);\n    return;\n  }\n\n  if (isDisabling) {\n    const result = await disableTelemetry(sys);\n    result\n      ? console.log(`\\n  ${logger.bold('Telemetry is now ') + DISABLED_MESSAGE}`)\n      : console.log(`Something went wrong when disabling Telemetry.`);\n    return;\n  }\n\n  console.log(`  ${logger.bold('Telemetry:')} ${logger.dim(INFORMATION)}`);\n\n  console.log(`\\n  ${logger.bold('Status')}: ${hasTelemetry ? ENABLED_MESSAGE : DISABLED_MESSAGE}`);\n\n  console.log(`    ${prompt} ${logger.green('stencil telemetry [off|on]')}\n\n        ${logger.cyan('off')} ${logger.dim('.............')} Disable sharing anonymous usage data\n        ${logger.cyan('on')} ${logger.dim('..............')} Enable sharing anonymous usage data\n  `);\n};\n","import type * as d from '../declarations';\nimport { taskTelemetry } from './task-telemetry';\n\nexport const taskHelp = async (config: d.Config, logger: d.Logger, sys?: d.CompilerSystem) => {\n  const prompt = logger.dim(sys.details.platform === 'windows' ? '>' : '$');\n\n  console.log(`\n  ${logger.bold('Build:')} ${logger.dim('Build components for development or production.')}\n\n    ${prompt} ${logger.green('stencil build [--dev] [--watch] [--prerender] [--debug]')}\n\n      ${logger.cyan('--dev')} ${logger.dim('.............')} Development build\n      ${logger.cyan('--watch')} ${logger.dim('...........')} Rebuild when files update\n      ${logger.cyan('--serve')} ${logger.dim('...........')} Start the dev-server\n      ${logger.cyan('--prerender')} ${logger.dim('.......')} Prerender the application\n      ${logger.cyan('--docs')} ${logger.dim('............')} Generate component readme.md docs\n      ${logger.cyan('--config')} ${logger.dim('..........')} Set stencil config file\n      ${logger.cyan('--stats')} ${logger.dim('...........')} Write stencil-stats.json file\n      ${logger.cyan('--log')} ${logger.dim('.............')} Write stencil-build.log file\n      ${logger.cyan('--debug')} ${logger.dim('...........')} Set the log level to debug\n\n\n  ${logger.bold('Test:')} ${logger.dim('Run unit and end-to-end tests.')}\n\n    ${prompt} ${logger.green('stencil test [--spec] [--e2e]')}\n\n      ${logger.cyan('--spec')} ${logger.dim('............')} Run unit tests with Jest\n      ${logger.cyan('--e2e')} ${logger.dim('.............')} Run e2e tests with Puppeteer\n\n\n  ${logger.bold('Generate:')} ${logger.dim('Bootstrap components.')}\n\n    ${prompt} ${logger.green('stencil generate')} or ${logger.green('stencil g')}\n\n`);\n\n  // TODO(STENCIL-148) make this parameter no longer optional, remove the surrounding if statement\n  if (sys) {\n    await taskTelemetry(config, sys, logger);\n  }\n\n  console.log(`\n  ${logger.bold('Examples:')}\n\n  ${prompt} ${logger.green('stencil build --dev --watch --serve')}\n  ${prompt} ${logger.green('stencil build --prerender')}\n  ${prompt} ${logger.green('stencil test --spec --e2e')}\n  ${prompt} ${logger.green('stencil telemetry on')}\n  ${prompt} ${logger.green('stencil generate')}\n  ${prompt} ${logger.green('stencil g my-component')}\n`);\n};\n","import type { CompilerSystem, Logger } from '../declarations';\nimport type { CoreCompiler } from './load-compiler';\n\nexport const taskInfo = (coreCompiler: CoreCompiler, sys: CompilerSystem, logger: Logger) => {\n  const details = sys.details;\n  const versions = coreCompiler.versions;\n\n  console.log(``);\n  console.log(`${logger.cyan('      System:')} ${sys.name} ${sys.version}`);\n  console.log(`${logger.cyan('     Plaform:')} ${details.platform} (${details.release})`);\n  console.log(\n    `${logger.cyan('   CPU Model:')} ${details.cpuModel} (${sys.hardwareConcurrency} cpu${\n      sys.hardwareConcurrency !== 1 ? 's' : ''\n    })`\n  );\n  console.log(`${logger.cyan('    Compiler:')} ${sys.getCompilerExecutingPath()}`);\n  console.log(`${logger.cyan('       Build:')} ${coreCompiler.buildId}`);\n  console.log(`${logger.cyan('     Stencil:')} ${coreCompiler.version}${logger.emoji(' ' + coreCompiler.vermoji)}`);\n  console.log(`${logger.cyan('  TypeScript:')} ${versions.typescript}`);\n  console.log(`${logger.cyan('      Rollup:')} ${versions.rollup}`);\n  console.log(`${logger.cyan('      Parse5:')} ${versions.parse5}`);\n  console.log(`${logger.cyan('      Sizzle:')} ${versions.sizzle}`);\n  console.log(`${logger.cyan('      Terser:')} ${versions.terser}`);\n  console.log(``);\n};\n","import type { Config } from '../declarations';\nimport { isString } from '@utils';\n\nexport const taskServe = async (config: Config) => {\n  config.suppressLogs = true;\n\n  config.flags.serve = true;\n  config.devServer.openBrowser = config.flags.open;\n  config.devServer.reloadStrategy = null;\n  config.devServer.initialLoadUrl = '/';\n  config.devServer.websocket = false;\n  config.maxConcurrentWorkers = 1;\n  config.devServer.root = isString(config.flags.root) ? config.flags.root : config.sys.getCurrentDirectory();\n\n  const devServerPath = config.sys.getDevServerExecutingPath();\n  const { start }: typeof import('@stencil/core/dev-server') = await config.sys.dynamicImport(devServerPath);\n  const devServer = await start(config.devServer, config.logger);\n\n  console.log(`${config.logger.cyan('     Root:')} ${devServer.root}`);\n  console.log(`${config.logger.cyan('  Address:')} ${devServer.address}`);\n  console.log(`${config.logger.cyan('     Port:')} ${devServer.port}`);\n  console.log(`${config.logger.cyan('   Server:')} ${devServer.browserUrl}`);\n  console.log(``);\n\n  config.sys.onProcessInterrupt(() => {\n    if (devServer) {\n      config.logger.debug(`dev server close: ${devServer.browserUrl}`);\n      devServer.close();\n    }\n  });\n};\n","import type { Config, TestingRunOptions } from '../declarations';\nimport { IS_NODE_ENV } from '../compiler/sys/environment';\n\nexport const taskTest = async (config: Config) => {\n  if (!IS_NODE_ENV) {\n    config.logger.error(`\"test\" command is currently only implemented for a NodeJS environment`);\n    return config.sys.exit(1);\n  }\n\n  try {\n    config.buildDocs = false;\n    const testingRunOpts: TestingRunOptions = {\n      e2e: !!config.flags.e2e,\n      screenshot: !!config.flags.screenshot,\n      spec: !!config.flags.spec,\n      updateScreenshot: !!config.flags.updateScreenshot,\n    };\n\n    // always ensure we have jest modules installed\n    const ensureModuleIds = ['@types/jest', 'jest', 'jest-cli'];\n\n    if (testingRunOpts.e2e) {\n      // if it's an e2e test, also make sure we're got\n      // puppeteer modules installed and if browserExecutablePath is provided don't download Chromium use only puppeteer-core instead\n      const puppeteer = config.testing.browserExecutablePath ? 'puppeteer-core' : 'puppeteer';\n\n      ensureModuleIds.push(puppeteer);\n\n      if (testingRunOpts.screenshot) {\n        // ensure we've got pixelmatch for screenshots\n        config.logger.warn(\n          config.logger.yellow(\n            `EXPERIMENTAL: screenshot visual diff testing is currently under heavy development and has not reached a stable status. However, any assistance testing would be appreciated.`\n          )\n        );\n      }\n    }\n\n    // ensure we've got the required modules installed\n    const diagnostics = await config.sys.lazyRequire.ensure(config.rootDir, ensureModuleIds);\n    if (diagnostics.length > 0) {\n      config.logger.printDiagnostics(diagnostics);\n      return config.sys.exit(1);\n    }\n\n    // let's test!\n    const { createTesting } = await import('@stencil/core/testing');\n    const testing = await createTesting(config);\n    const passed = await testing.run(testingRunOpts);\n    await testing.destroy();\n\n    if (!passed) {\n      return config.sys.exit(1);\n    }\n  } catch (e) {\n    config.logger.error(e);\n    return config.sys.exit(1);\n  }\n};\n","import type * as d from '../declarations';\nimport { dependencies } from '../compiler/sys/dependencies.json';\nimport { findConfig } from './find-config';\nimport { hasError, isFunction, shouldIgnoreError } from '@utils';\nimport { loadCoreCompiler, CoreCompiler } from './load-compiler';\nimport { loadedCompilerLog, startupLog, startupLogVersion } from './logs';\nimport { parseFlags } from './parse-flags';\nimport { taskBuild } from './task-build';\nimport { taskDocs } from './task-docs';\nimport { taskGenerate } from './task-generate';\nimport { taskHelp } from './task-help';\nimport { taskInfo } from './task-info';\nimport { taskPrerender } from './task-prerender';\nimport { taskServe } from './task-serve';\nimport { taskTest } from './task-test';\nimport { taskTelemetry } from './task-telemetry';\nimport { telemetryAction } from './telemetry/telemetry';\n\nexport const run = async (init: d.CliInitOptions) => {\n  const { args, logger, sys } = init;\n\n  try {\n    const flags = parseFlags(args, sys);\n    const task = flags.task;\n\n    if (flags.debug || flags.verbose) {\n      logger.setLevel('debug');\n    }\n\n    if (flags.ci) {\n      logger.enableColors(false);\n    }\n\n    if (isFunction(sys.applyGlobalPatch)) {\n      sys.applyGlobalPatch(sys.getCurrentDirectory());\n    }\n\n    if (task === 'help' || flags.help) {\n      await taskHelp({ flags: { task: 'help', args }, outputTargets: [] }, logger, sys);\n      return;\n    }\n\n    startupLog(logger, task);\n\n    const findConfigResults = await findConfig({ sys, configPath: flags.config });\n    if (hasError(findConfigResults.diagnostics)) {\n      logger.printDiagnostics(findConfigResults.diagnostics);\n      return sys.exit(1);\n    }\n\n    const ensureDepsResults = await sys.ensureDependencies({\n      rootDir: findConfigResults.rootDir,\n      logger,\n      dependencies: dependencies as any,\n    });\n\n    if (hasError(ensureDepsResults.diagnostics)) {\n      logger.printDiagnostics(ensureDepsResults.diagnostics);\n      return sys.exit(1);\n    }\n\n    const coreCompiler = await loadCoreCompiler(sys);\n\n    if (task === 'version' || flags.version) {\n      console.log(coreCompiler.version);\n      return;\n    }\n\n    startupLogVersion(logger, task, coreCompiler);\n\n    loadedCompilerLog(sys, logger, flags, coreCompiler);\n\n    if (task === 'info') {\n      await telemetryAction(sys, { flags: { task: 'info' }, outputTargets: [] }, logger, coreCompiler, async () => {\n        await taskInfo(coreCompiler, sys, logger);\n      });\n      return;\n    }\n\n    const validated = await coreCompiler.loadConfig({\n      config: {\n        flags,\n      },\n      configPath: findConfigResults.configPath,\n      logger,\n      sys,\n    });\n\n    if (validated.diagnostics.length > 0) {\n      logger.printDiagnostics(validated.diagnostics);\n      if (hasError(validated.diagnostics)) {\n        return sys.exit(1);\n      }\n    }\n\n    if (isFunction(sys.applyGlobalPatch)) {\n      sys.applyGlobalPatch(validated.config.rootDir);\n    }\n\n    await sys.ensureResources({ rootDir: validated.config.rootDir, logger, dependencies: dependencies as any });\n\n    await telemetryAction(sys, validated.config, logger, coreCompiler, async () => {\n      await runTask(coreCompiler, validated.config, task, sys);\n    });\n  } catch (e) {\n    if (!shouldIgnoreError(e)) {\n      logger.error(`uncaught cli error: ${e}${logger.getLevel() === 'debug' ? e.stack : ''}`);\n      return sys.exit(1);\n    }\n  }\n};\n\nexport const runTask = async (\n  coreCompiler: CoreCompiler,\n  config: d.Config,\n  task: d.TaskCommand,\n  sys?: d.CompilerSystem\n) => {\n  config.flags = config.flags || { task };\n  config.outputTargets = config.outputTargets || [];\n\n  switch (task) {\n    case 'build':\n      await taskBuild(coreCompiler, config, sys);\n      break;\n\n    case 'docs':\n      await taskDocs(coreCompiler, config);\n      break;\n\n    case 'generate':\n    case 'g':\n      await taskGenerate(coreCompiler, config);\n      break;\n\n    case 'help':\n      taskHelp(config, config.logger, sys);\n      break;\n\n    case 'prerender':\n      await taskPrerender(coreCompiler, config);\n      break;\n\n    case 'serve':\n      await taskServe(config);\n      break;\n\n    case 'telemetry':\n      // TODO(STENCIL-148) make this parameter no longer optional, remove the surrounding if statement\n      if (sys) {\n        await taskTelemetry(config, sys, config.logger);\n      }\n      break;\n\n    case 'test':\n      await taskTest(config);\n      break;\n\n    case 'version':\n      console.log(coreCompiler.version);\n      break;\n\n    default:\n      config.logger.error(`${config.logger.emoji('âŒ ')}Invalid stencil command, please see the options below:`);\n      taskHelp(config, config.logger, sys);\n      return config.sys.exit(1);\n  }\n};\n"],"names":["isTest"],"mappings":"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"}